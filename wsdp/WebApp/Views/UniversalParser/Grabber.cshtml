@model Model.DTO.GrabberSettingsDTO
@{
	ViewBag.Title = "Grabber";
	Layout = "~/Views/Shared/_Layout.cshtml";
}
<div class="container-fluid">

	<div class="row">
		<div class="col-sm-12">
			@Html.Partial("HeaderPartialView")
		</div>
	</div>
	<br />
	<div class="row">
		<div class="col-sm-12 col-md-6">
			<div class="row">
				<div class="col-sm-12" id="iframe">
					<iframe id="iframe1" src="@TempData.Peek("FirstPage")" style="width:100%; height:600px;"></iframe>
					<button type="button" value="Previous" class="btn btn-default col-md-2 center-block" id="Previous">Previous</button>
					<button type="button" value="Next" class="btn btn-default col-md-2 col-md-push-8 center-block" id="Next">Next</button>
				</div>
			</div>
		</div>
		<div class="hide" id="items" data-list-items="@Model.urlJsonData"></div>

		<div class="col-sm-12 col-md-6">
			<form class="form-horizontal" action="/UniversalParser/Grabber" method="post">
				<input type="hidden" name="id" value="@Model.Id" />

				@for (int index = 0; index < Model.PropertyItems.Count; index++) {
					<div class="form-group">
						@Html.Label(Model.PropertyItems[index].Name, new { @class = "col-sm-2 control-label" })
						@Html.HiddenFor(t => Model.PropertyItems[index].Name)
						@Html.HiddenFor(t => Model.PropertyItems[index].Id)
						<div class="col-sm-10">
							@Html.TextBoxFor(t => Model.PropertyItems[index].Value, new { @class = "form-control", @placeholder = "Click here and get Xpath" })
						</div>

					</div>
				}
				<div class="form-group">
					<div class="col-sm-offset-10">
						<button type="submit" class="btn btn-default">Done</button>
					</div>
				</div>
			</form>
		</div>



	</div>
</div>
@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/Scripts/GrabberJs")
<script>
	$(document).ready(function () {
		$(".list-inline-item:nth-child(3)").addClass("active");
		var current = 0;
		var ListItems = JSON.parse($('#items').attr('data-list-items'));
		var length = ListItems.length;

		$('#Next').click(function () {
			if (current < length) {
				current++;
				$('#iframe1').attr('src', ListItems[current]);
			}
		});
		$('#Previous').click(function () {
			if (current > 0) {
				current--;
				$('#iframe1').attr('src', ListItems[current]);
			}
		});
	});
</script>

